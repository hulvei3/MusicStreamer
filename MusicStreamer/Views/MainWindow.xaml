<Window x:Class="MusicStreamer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MusicStreamer" Height="627" Width="784" Name="windowMain" ResizeMode="CanResizeWithGrip" Loaded="windowMain_Loaded" Icon="pack://application:,,,/Resources/ApplicationIcon.png">

	<Window.Background>
		<StaticResource ResourceKey="AppGradientBackground"/>
	</Window.Background>
    <Grid Name="gridMain">
        <Grid Name="gridMain2" Margin="0,54,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="420" />
                <ColumnDefinition Width="43" />
                <ColumnDefinition Width="293*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="124" />
                <RowDefinition Height="8" />
                <RowDefinition Height="270*" />
                <RowDefinition Height="24" />
            </Grid.RowDefinitions>



            <!-- Player Area -->

            <Grid Height="124" Name="gridPlayer" VerticalAlignment="Top" HorizontalAlignment="Left" Width="457" Grid.ColumnSpan="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="420" />
                    <ColumnDefinition Width="43" />
                    <ColumnDefinition Width="293*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="124" />
                    <RowDefinition Height="8" />
                    <RowDefinition Height="270*" />
                    <RowDefinition Height="24" />
                </Grid.RowDefinitions>

                <Slider Value="{Binding Path=Player.Volume}" Grid.RowSpan="3" Height="103" HorizontalAlignment="Left" Margin="8,15,0,0" Name="sliderVolume" VerticalAlignment="Top" Width="23" Orientation="Vertical" Maximum="100" Grid.Column="1" SmallChange="1" LargeChange="10" ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Value}" AutoToolTipPlacement="TopLeft" />

                <Button Command="{Binding CurrentSong.PrevCommand}" Content="Prev" Name="buttonPrev" VerticalAlignment="Top" Margin="14,41,363,0" Height="44" >
                    <Button.Template>
                        <ControlTemplate x:Name="PrevButton" TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/PrevSong.png" VerticalAlignment="Top" ToolTip="Previous Song"/>
                                <Image Name="Pressed" Source="" Visibility="Hidden"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Command="{Binding CurrentSong.StopCommand}" Content="Stop" Name="buttonStop" VerticalAlignment="Top" Margin="68,41,309,0" Height="37">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/StopSong.png" VerticalAlignment="Top" ToolTip="Stop Song"/>
                                <Image Name="Pressed" Source="" Visibility="Hidden"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Command="{Binding CurrentSong.PlayPauseCommand}" Height="43" Margin="126,41,229,0" Name="buttonPlay" VerticalAlignment="Top"
                        CommandParameter="{Binding ElementName=textBoxCurrentSong, Path=Text}" Click="buttonPlay_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/PlayPause.png" VerticalAlignment="Top" ToolTip="Play/Pause Song"/>
                                <Image Name="Pressed" Source="" Visibility="Hidden"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Command="{Binding CurrentSong.SkipCommand}" Content="Next" Height="45" Margin="189,41,186,0" Name="buttonNext" VerticalAlignment="Top" >
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/NextSong.png" VerticalAlignment="Top" ToolTip="Skip Song"/>
                                <Image Name="Pressed" Source="" Visibility="Hidden"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Content="Shuffle" Height="45" Margin="326,41,48,0" Name="buttonShuffle" VerticalAlignment="Top">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/Shuffle.png" VerticalAlignment="Top" ToolTip="Shuffle Playlist"/>
                                <Image Name="Pressed" Source="" Visibility="Hidden"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button Content="Repeat" Height="45" Margin="374,41,0,0" Name="buttonRepeat" VerticalAlignment="Top" ToolTip="Repeat Playlist">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/Repeat.png" VerticalAlignment="Top"/>
                                <Image Name="Pressed"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <TextBox Text="{Binding Path=CurrentSong.CurrentTimeFormatted, Mode=OneWay}" FontSize="18" FontWeight="Bold" Height="32" IsReadOnly="True" Margin="240,46,0,0" MaxLines="1" Name="textBoxTime" Opacity="0.7" TextAlignment="Center" VerticalAlignment="Top" HorizontalAlignment="Left" Width="86" Padding="0" />

                <Grid>
                    <ProgressBar Value="{Binding Path=CurrentSong.StreamerDownloadProgress}" IsIndeterminate="{Binding Path=CurrentSong.Streaming}" Height="18" HorizontalAlignment="Left" Margin="12,84,0,0" Name="progressBarStreaming" VerticalAlignment="Top" Width="408" Opacity="0.5" Maximum="100" BorderBrush="{x:Null}" Background="{x:Null}" />
                    <TextBlock Text="{Binding Path=CurrentSong.Streaming}" Margin="0,84,0,22" TextAlignment="Center" />
                </Grid>
                

                <Slider Value="{Binding Path=CurrentSong.CurrentTime}" Maximum="{Binding Path=CurrentSong.SongLength}" Height="23" HorizontalAlignment="Left" Margin="12,101,0,0" Name="sliderSeeker" VerticalAlignment="Top" Width="402" />
                <TextBox Text="{Binding Path=Playlist.SelectedPlaylistItem.Url}" Height="23" HorizontalAlignment="Left" Margin="12,6,0,0" Name="textBoxCurrentSong" VerticalAlignment="Top" Width="196" ToolTip="{Binding RelativeSource={RelativeSource Self}, Path=Text}" />
                <TextBox Text="{Binding Path=Playlist.Playing.Name}" Height="23" HorizontalAlignment="Left" Margin="214,6,0,0" Name="textBoxPlayingSong" VerticalAlignment="Top" Width="206" IsReadOnly="True" />
            </Grid>
            <!-- Playlist Area-->

            <Grid Grid.Row="2" Name="gridPlaylist" HorizontalAlignment="Left" Width="457" Grid.ColumnSpan="2">
                <ListBox Name="playlist" Margin="6,6,0,38" ItemsSource="{Binding Path=Playlist.CurrentUIPlaylist}" ItemTemplate="{StaticResource playlistTemplate}" SelectedItem="{Binding Path=Playlist.SelectedPlaylistItem}" />
                <!-- PLAYLIST -->
                <Button Content="New playlist" HorizontalAlignment="Left" Margin="6,0,0,0" Name="ClearPlaylistButton" Width="38" Height="35" VerticalAlignment="Bottom" Command="ApplicationCommands.New" Cursor="Hand" ToolTip="Clear Playlist">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/ClearPlaylist.png" VerticalAlignment="Top"/>
                                <Image Name="Pressed"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button Content="Save playlist" HorizontalAlignment="Left" Margin="41,0,0,0" Name="SavePlaylistButton" Width="46" Height="35" VerticalAlignment="Bottom" Command="ApplicationCommands.Save" Cursor="Hand" ToolTip="Save Playlist">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/SavePlaylist.png" VerticalAlignment="Top"/>
                                <Image Name="Pressed"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Content="Load playlist" Command="ApplicationCommands.Open" HorizontalAlignment="Left" Margin="88,0,0,0" Name="LoadPlaylistButton" Width="38" Height="35" VerticalAlignment="Bottom" Cursor="Hand" ToolTip="Open Playlist">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/LoadPlaylist.png" VerticalAlignment="Top"/>
                                <Image Name="Pressed"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Content="Redo" Height="41" HorizontalAlignment="Right" Name="buttonRedo" VerticalAlignment="Bottom" Width="50" Command="ApplicationCommands.Redo" ToolTip="Redo" Margin="0,0,6,0">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/Redo.png" VerticalAlignment="Center"/>
                                <Image Name="Pressed" Source="" Visibility="Hidden" VerticalAlignment="Center"/>
                                <Image Name="Disabled" Source="" Visibility="Hidden"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Content="Undo" HorizontalAlignment="Left" Margin="354,0,0,0" Name="buttonUndo" Width="60" Command="ApplicationCommands.Undo" Height="41" VerticalAlignment="Bottom" ToolTip="Undo">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid>
                                <Image Name="Normal" Source="pack://application:,,,/Resources/Undo.png" VerticalAlignment="Center" />
                                <Image Name="Pressed" Source="" Visibility="Hidden" VerticalAlignment="Center"/>
                                <Image Name="Disabled" Source="" Visibility="Hidden"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="Normal" Property="Visibility" Value="Hidden"/>
                                    <Setter TargetName="Pressed" Property="Visibility" Value="Visible"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button Content="Debug window" Height="23" Margin="189,0,178,6" Name="buttonDebug" VerticalAlignment="Bottom" Click="buttonDebug_Click" />
            </Grid>


            <!-- Server area -->

            <Grid Grid.Column="2" Name="gridServer" Grid.RowSpan="3" Grid.ColumnSpan="2" >
                <ListBox ItemsSource="{Binding Path=Navigation.CurrentList}" ItemTemplate="{StaticResource serverListTemplate}" Margin="6,69,6,38" Name="serverlistBox" 
                      SelectedValue="{Binding Path=Navigation.SelectedServerListItem}" />
                <TextBox Text="{Binding Path=Navigation.CurrentLocation}" Height="23" Margin="6,6,6,0" PreviewKeyUp="currentLocationTextBox_PreviewKeyUp"
                     IsReadOnly="False" Name="currentLocationTextBox" VerticalAlignment="Top" />
                <Label Content="{Binding Path=CurrentSong.BytesReceived}" Name="labelStreamingStatus" HorizontalAlignment="Right" Width="81" Height="28" VerticalAlignment="Bottom" HorizontalContentAlignment="Right" />
                <Button Click="buttonConnect_Click" Content="Connection Manager" Name="buttonConnect" Margin="0,41,6,0" Height="22" VerticalAlignment="Top" ToolTip="Connect to the server" HorizontalAlignment="Right" Width="117"></Button>
                
                <Grid>
                    <ComboBox Height="23" Margin="6,40,129,0" Name="ServerComboBox" VerticalAlignment="Top" ItemsSource="{Binding Path=Servers.Connections}" SelectionChanged="ServerComboBox_SelectionChanged" />
                    <TextBlock Text="Choose a Server..."  TextAlignment="Center" IsHitTestVisible="False" Margin="6,44,129,0" Height="16" VerticalAlignment="Top" Name="DefaultComboTextBlock" />
                </Grid>
                
                
                
            </Grid>


            <StatusBar Grid.Row="3" Margin="0" Name="statusBar" Grid.ColumnSpan="3" Height="23" VerticalAlignment="Bottom">
                <StatusBarItem Content="{Binding Path=CurrentSong.DebugText}" />
                <StatusBarItem Content="{Binding Path=CurrentSong.PlayerState}" HorizontalContentAlignment="Right"/>
            </StatusBar>
        </Grid>


        <Menu Name="MenuBar" Height="21" VerticalAlignment="Top">
            <MenuItem Name="File" Header="File" Width="Auto" Height="Auto" Padding="7,2,8,3">
                <MenuItem Header="Clear Playlist" Command="ApplicationCommands.New">
                    <MenuItem.Icon>
                        <Image Source="pack://application:,,,/Resources/ClearPlaylist.png" Width="20" Height="20"></Image>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Open Playlist" Command="ApplicationCommands.Open">
                    <MenuItem.Icon>
                        <Image Source="pack://application:,,,/Resources/LoadPlaylist.png" Width="20" Height="20"></Image>
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="Save Playlist" Command="ApplicationCommands.Save">
                    <MenuItem.Icon>
                        <Image Source="pack://application:,,,/Resources/SavePlaylist.png" Width="20" Height="20"></Image>
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="Connections.." Click="ConnectionMenuItem_Click" Name="ConnectionMenuItem" />
                <Separator/>
                <MenuItem Header="_Close" Command="ApplicationCommands.Close"></MenuItem>
            </MenuItem>
            <MenuItem Name="Edit" Header="Edit" Width="Auto" Height="Auto">
                <MenuItem Header="Undo" Command="ApplicationCommands.Undo"></MenuItem>
                <MenuItem Header="Redo" Command="ApplicationCommands.Redo"></MenuItem>
            </MenuItem>
            <MenuItem Name="Help" Header="Help" Width="Auto" Height="Auto">
                <MenuItem Header="How to use the..">
                    <MenuItem Header="Server.."></MenuItem>
                    <MenuItem Header="Player.."></MenuItem>
                    <MenuItem Header="Playlist.."></MenuItem>
                </MenuItem>
                <MenuItem Header="About" Command="ApplicationCommands.Help"></MenuItem>
            </MenuItem>
        </Menu>
    </Grid>

</Window>
